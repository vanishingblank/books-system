{"ast":null,"code":"export default {\n  name: \"Login\",\n  data() {\n    return {\n      loginForm: {\n        no: '',\n        password: ''\n      },\n      rules: {\n        no: [{\n          required: true,\n          message: '请输入帐号',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    confirm() {\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.$axios.post(\"http://localhost:8090/user/login\", this.loginForm).then(res => res.data).then(res => {\n            if (res.code == 200) {\n              //存储\n              sessionStorage.setItem(\"CurUser\", JSON.stringify(res.data.user));\n              console.log(res.data.menu);\n              this.$store.commit(\"setMenu\", res.data.menu);\n\n              //跳转到主页\n              this.$router.replace('/Index');\n            } else {\n              this.confirm_disabled = false;\n              alert('用户名或密码错误！');\n              return false;\n            }\n          });\n        } else {\n          this.confirm_disabled = flase;\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","loginForm","no","password","rules","required","message","trigger","methods","confirm","confirm_disabled","$refs","validate","valid","$axios","post","then","res","code","sessionStorage","setItem","JSON","stringify","user","console","log","menu","$store","commit","$router","replace","alert","flase"],"sources":["src/components/Login.vue"],"sourcesContent":["<script>\nexport default {\n  name: \"Login\",\n  data(){\n    return{\n      loginForm:{\n        no: '',\n        password: ''\n      },\n      rules:{\n        no: [\n          { required: true, message: '请输入帐号', trigger: 'blur' }\n        ],\n        password: [\n          { required: true, message: '请输入密码', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  methods: {\n    confirm(){\n      this.confirm_disabled = true;\n      this.$refs.loginForm.validate((valid)=>{\n        if (valid) {\n          this.$axios.post(\"http://localhost:8090/user/login\", this.loginForm).then(res=>res.data).then(res=>{\n            if(res.code==200){\n              //存储\n              sessionStorage.setItem(\"CurUser\",JSON.stringify(res.data.user))\n              console.log(res.data.menu)\n              this.$store.commit(\"setMenu\",res.data.menu)\n\n              //跳转到主页\n              this.$router.replace('/Index');\n            }else{\n              this.confirm_disabled=false;\n              alert('用户名或密码错误！');\n              return false;\n            }\n          });\n        }else{\n          this.confirm_disabled=flase;\n          return false;\n        }\n      });\n    }\n  }\n}\n</script>\n\n<template>\n  <div class=\"loginBody\">\n    <img  class=\"img\" src=\"./img/selin.jpg\"/>\n    <div class=\"loginDiv\">\n      <div class=\"login-content\">\n        <h1 class=\"login-title\" style=\"color: white\">用户登录</h1>\n        <el-form :model=\"loginForm\" label-width=\"100px\"\n                 :rules=\"rules\" ref=\"loginForm\">\n          <el-form-item label=\"帐号\" prop=\"no\">\n            <el-input style=\"width: 220px\" type=\"text\" v-model=\"loginForm.no\"\n                      autocomplete=\"off\" size=\"small\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input style=\"width: 220px\" type=\"password\" v-model=\"loginForm.password\"\n                      show-password autocomplete=\"off\" size=\"small\" @keyup.enter.native=\"confirm\"></el-input>\n          </el-form-item>\n          <el-form-item style=\"margin-left: 70px\">\n            <el-button type=\"primary\" @click=\"confirm\" >确 定</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n  .loginBody {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n  .img {\n    height: 100%;\n    width: 100%;\n  }\n  .loginDiv {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -200px;\n    margin-left: -250px;\n    width: 450px;\n    height: 330px;\n    border-radius: 5%;\n    //border-style: solid;\n    //border-width: 5px;\n    border-color: white;\n    backdrop-filter: blur(80px);\n  }\n  .login-title {\n    margin: 20px 0;\n    text-align: center;\n  }\n  .login-content {\n    width: 400px;\n    height: 250px;\n    position: absolute;\n    top: 25px;\n    left: 25px;\n  }\n</style>"],"mappings":"AACA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,SAAA;QACAC,EAAA;QACAC,QAAA;MACA;MACAC,KAAA;QACAF,EAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAJ,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACA,KAAAC,gBAAA;MACA,KAAAC,KAAA,CAAAV,SAAA,CAAAW,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,MAAA,CAAAC,IAAA,0CAAAd,SAAA,EAAAe,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAjB,IAAA,EAAAgB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA;cACAC,cAAA,CAAAC,OAAA,YAAAC,IAAA,CAAAC,SAAA,CAAAL,GAAA,CAAAjB,IAAA,CAAAuB,IAAA;cACAC,OAAA,CAAAC,GAAA,CAAAR,GAAA,CAAAjB,IAAA,CAAA0B,IAAA;cACA,KAAAC,MAAA,CAAAC,MAAA,YAAAX,GAAA,CAAAjB,IAAA,CAAA0B,IAAA;;cAEA;cACA,KAAAG,OAAA,CAAAC,OAAA;YACA;cACA,KAAApB,gBAAA;cACAqB,KAAA;cACA;YACA;UACA;QACA;UACA,KAAArB,gBAAA,GAAAsB,KAAA;UACA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}